/*!
 *
 * Asynjax - Asynchronous Ajax without jQuery
 * Copyright (c) 2018 JeiHO (https://github.com/jeijei4/Asynjax)
 * Licensed under MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 * Version: 2.0.0
 *
 */
var asynjax={contains:function(e,t){return new RegExp(t.toLowerCase(),"g").test(e.toLowerCase())},httpRequest:function(){"use strict";if(window.XMLHttpRequest)return new XMLHttpRequest;const e=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"];let t;for(let n=0;n<e.length;n++)try{t=new ActiveXObject(e[n]);break}catch(e){}return t},param:function(e,t){var n,r=[];for(n in e)if(e.hasOwnProperty(n)&&e[n]){var s=t?t+"["+n+"]":n,o=e[n];r.push(null!==o&&"object"==typeof o?asynjax.param(o,s):encodeURIComponent(s)+"="+encodeURIComponent(o))}return r.join("&")},getFormData:function(e){let t={};try{e.forEach(function(e,n){t[n]=e})}catch(e){throw t={},new Error(e.message)}return t},getForm:function(e,t){let n={};try{const p=e.querySelectorAll('input:not([type="radio"]):not([type="checkbox"]), input[type="checkbox"]:checked, input[type="radio"]:checked, select, textarea'),l=p.length;for(let e=0;e<l;++e){const l=p[e],u=p[e].tagName.toLowerCase();var r=l.name;const f=l.value;if(r)if("select"===u&&!0===l.multiple){var s,o=[],a=0;const e=l.options.length;for(s=0;s<e;++s)l.options[s].selected&&(o[a]=l.options[s].value,++a);if(0===t.length||!1===asynjax.contains(l.className,t)){const e=o.length;var c="";for(k=0;k<e;++k)""!==c&&(c+=","),"string"==typeof o[k]?c+='"'+o[k]+'"':c+=o[k];const t='"'+r+'":['+c+"]";var i=JSON.stringify(n);n="{}"===i?JSON.parse("{"+t+"}"):JSON.parse("{"+i.substring(1,i.length-1)+","+t+"}")}}else 0!==t.length&&!1!==asynjax.contains(l.className,t)||(n[r]=f)}}catch(e){throw n={},new Error(e.message)}return n},send:function(e,t,n,r){"use strict";let s=asynjax.httpRequest();s.open(t,e,!0,null,null);const o="object"==typeof r;if(s.withCredentials=!0===o&&!0===r.withCredentials,s.ontimeout=function(){console.error("Asynjax error: The waiting time for the "+e+" request has expired.")},s.onerror=function(){console.error("Asynjax error: "+s.statusText+" ["+s.status+"]  -  "+s.responseText)},s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){let e=s.responseText;if(!0===o&&!0===r.asJson){let t=e.trim();try{e=JSON.parse(t)}catch(n){try{const n=t.replace(/\\'/g,"'");e=JSON.parse(n)}catch(t){e={}}}}n(!0,e)}else n(!1,"Asynjax error: "+s.statusText+" ["+s.status+"]  -  "+s.responseText)},!0===o&&"function"==typeof r.progress&&(s.upload.onprogress=function(e){let t="?";e.lengthComputable&&(t=Math.round(e.loaded/e.total*100)),r.progress(t)}),s.setRequestHeader("Cache-Control","no-cache"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===t&&!0===o)if("object"==typeof r.formData)s.send(r.formData);else if(r.contentType&&s.setRequestHeader("Content-Type",r.contentType),r.form){const e="string"==typeof r.hideClass?r.hideClass:"",t=asynjax.getForm(r.form,e);s.send(asynjax.param(t))}else null===r.params?s.send():s.send(r.params);else s.send()},post:function(e,t,n){"use strict";if("function"==typeof t)asynjax.send(e,"POST",t);else{if("function"!=typeof n)return console.error("Asynjax error: The exit function was not found."),!1;if("object"!=typeof t)return console.error("Asynjax error: Invalid parameter, an object is required."),!1;if(!1!==t.contentType)if(t.contentType&&!0===asynjax.contains(t.contentType,"json")){if(t.params)try{t.params=JSON.stringify(t.params)}catch(e){throw new Error(e.message)}else t.params=null;t.contentType="application/json; charset=UTF-8"}else{if(t.params)try{t.params=asynjax.param(t.params)}catch(e){throw new Error(e.message)}else t.params=null;t.contentType=t.contentType||"application/x-www-form-urlencoded; charset=UTF-8"}asynjax.send(e,"POST",n,t)}}};
